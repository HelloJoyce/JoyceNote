#  Docker å…¥é—¨æŒ‡å—

---

## **Docker æ˜¯ä»€ä¹ˆï¼Ÿ**
Docker æ˜¯ä¸€ä¸ª**å®¹å™¨åŒ–å¹³å°**ï¼Œå¯ä»¥å°†åº”ç”¨ç¨‹åºåŠå…¶ä¾èµ–ç¯å¢ƒæ‰“åŒ…æˆä¸€ä¸ªç‹¬ç«‹çš„â€œé›†è£…ç®±â€ï¼ˆå³å®¹å™¨ï¼‰ï¼Œå®ç°**ä¸€æ¬¡æ„å»ºï¼Œåˆ°å¤„è¿è¡Œ**ã€‚  
ğŸ‘‰ **ç±»æ¯”ç†è§£**ï¼š  
- **è™šæ‹Ÿæœº**ï¼šæ¨¡æ‹Ÿå®Œæ•´æ“ä½œç³»ç»Ÿï¼ˆç¬¨é‡ï¼Œå ç”¨èµ„æºå¤šï¼‰ã€‚  
- **å®¹å™¨**ï¼šåªæ‰“åŒ…åº”ç”¨å’Œå¿…è¦ä¾èµ–ï¼ˆè½»é‡ã€ç§’çº§å¯åŠ¨ï¼Œå…±äº«ä¸»æœºå†…æ ¸ï¼‰ã€‚  

---

## **ä¸ºä»€ä¹ˆéœ€è¦ Dockerï¼Ÿ**
1. **ç¯å¢ƒä¸€è‡´æ€§**ï¼šè§£å†³â€œåœ¨æˆ‘ç”µè„‘ä¸Šèƒ½è¿è¡Œï¼Œåˆ°æœåŠ¡å™¨å°±ä¸è¡Œâ€çš„é—®é¢˜ã€‚  
2. **å¿«é€Ÿéƒ¨ç½²**ï¼šç§’çº§å¯åŠ¨åº”ç”¨ï¼Œæ— éœ€é…ç½®å¤æ‚ç¯å¢ƒã€‚  
3. **èµ„æºé«˜æ•ˆ**ï¼šä¸€å°æœåŠ¡å™¨å¯è¿è¡Œæ•°ç™¾ä¸ªå®¹å™¨ï¼ˆè™šæ‹Ÿæœºé€šå¸¸åªèƒ½å‡ åä¸ªï¼‰ã€‚  

---

## **Docker æ ¸å¿ƒæ¦‚å¿µ**
### 1. **é•œåƒï¼ˆImageï¼‰**
- å®¹å™¨çš„â€œæ¨¡æ¿â€ï¼ŒåŒ…å«è¿è¡Œåº”ç”¨æ‰€éœ€çš„ä»£ç ã€åº“ã€ç¯å¢ƒç­‰ã€‚  
- ä¾‹å¦‚ï¼š`nginx` é•œåƒã€`python` é•œåƒã€‚  

### 2. **å®¹å™¨ï¼ˆContainerï¼‰**
- é•œåƒçš„è¿è¡Œå®ä¾‹ï¼ˆç±»ä¼¼â€œç±»â€å’Œâ€œå¯¹è±¡â€çš„å…³ç³»ï¼‰ã€‚  
- å®¹å™¨æ˜¯è½»é‡çº§ã€éš”ç¦»çš„è¿›ç¨‹ï¼Œå¯ä»¥å¯åŠ¨ã€åœæ­¢ã€åˆ é™¤ã€‚  

### 3. **ä»“åº“ï¼ˆRegistryï¼‰**
- å­˜å‚¨å’Œåˆ†å‘é•œåƒçš„å¹³å°ã€‚  
- **Docker Hub**ï¼šå®˜æ–¹å…¬å…±ä»“åº“ï¼ˆç±»ä¼¼ GitHubï¼‰ã€‚  
- ç§æœ‰ä»“åº“ï¼šä¼ä¸šè‡ªå»ºçš„é•œåƒä»“åº“ï¼ˆå¦‚ Harborï¼‰ã€‚  

---

## **Docker å®‰è£…**
### Windows/macOS
1. ä¸‹è½½ Docker Desktopï¼šhttps://www.docker.com/products/docker-desktop  
2. å®‰è£…åå¯åŠ¨ï¼Œç¡®ä¿å³ä¸‹è§’ Docker å›¾æ ‡æ˜¾ç¤ºä¸ºâ€œRunningâ€ã€‚  

### Linuxï¼ˆUbuntuï¼‰
```bash
# å®‰è£… Docker
sudo apt update
sudo apt install docker.io

# å¯åŠ¨ Docker æœåŠ¡
sudo systemctl start docker
sudo systemctl enable docker

# éªŒè¯å®‰è£…
docker --version
```

---

## **Docker åŸºç¡€æ“ä½œ**
### 1. æ‹‰å–é•œåƒï¼ˆä»ä»“åº“ä¸‹è½½ï¼‰
```bash
docker pull nginx:latest  # ä¸‹è½½æœ€æ–°ç‰ˆ Nginx é•œåƒ
```

### 2. è¿è¡Œå®¹å™¨
```bash
docker run -d -p 80:80 --name my-nginx nginx
```
- `-d`ï¼šåå°è¿è¡Œï¼ˆdetached modeï¼‰ã€‚  
- `-p 80:80`ï¼šå°†ä¸»æœºçš„ 80 ç«¯å£æ˜ å°„åˆ°å®¹å™¨çš„ 80 ç«¯å£ã€‚  
- `--name`ï¼šç»™å®¹å™¨å‘½åï¼ˆå¦åˆ™ Docker ä¼šéšæœºç”Ÿæˆåç§°ï¼‰ã€‚  

### 3. æŸ¥çœ‹å®¹å™¨çŠ¶æ€
```bash
docker ps          # æŸ¥çœ‹è¿è¡Œä¸­çš„å®¹å™¨
docker ps -a       # æŸ¥çœ‹æ‰€æœ‰å®¹å™¨ï¼ˆåŒ…æ‹¬å·²åœæ­¢çš„ï¼‰
```

### 4. åœæ­¢/å¯åŠ¨/åˆ é™¤å®¹å™¨
```bash
docker stop my-nginx    # åœæ­¢å®¹å™¨
docker start my-nginx   # å¯åŠ¨å·²åœæ­¢çš„å®¹å™¨
docker rm my-nginx      # åˆ é™¤å®¹å™¨ï¼ˆéœ€å…ˆåœæ­¢ï¼‰
```

### 5. è¿›å…¥å®¹å™¨å†…éƒ¨
```bash
docker exec -it my-nginx /bin/bash
```
- `-it`ï¼šä»¥äº¤äº’æ¨¡å¼è¿›å…¥å®¹å™¨ã€‚  
- `/bin/bash`ï¼šå¯åŠ¨å®¹å™¨çš„ Bash ç»ˆç«¯ã€‚  

### 6. æŸ¥çœ‹é•œåƒåˆ—è¡¨
```bash
docker images
```

---

## **å®é™…åº”ç”¨åœºæ™¯**
### åœºæ™¯ 1ï¼šå¿«é€Ÿéƒ¨ç½²ä¸€ä¸ªç½‘é¡µ
1. åˆ›å»ºä¸€ä¸ª `index.html` æ–‡ä»¶ï¼š
   ```html
   <h1>Hello Docker!</h1>
   ```

2. è¿è¡Œ Nginx å®¹å™¨å¹¶æŒ‚è½½æœ¬åœ°ç›®å½•ï¼š
   ```bash
   docker run -d -p 80:80 -v /path/to/html:/usr/share/nginx/html --name my-web nginx
   ```
   - `-v`ï¼šå°†æœ¬åœ°çš„ `/path/to/html` ç›®å½•æŒ‚è½½åˆ°å®¹å™¨çš„ `/usr/share/nginx/html`ã€‚  

3. è®¿é—® `http://localhost`ï¼Œå³å¯çœ‹åˆ°ä½ çš„ç½‘é¡µï¼

---

### åœºæ™¯ 2ï¼šè¿è¡Œ Python åº”ç”¨
1. åˆ›å»ºä¸€ä¸ª `app.py`ï¼š
   ```python
   from flask import Flask
   app = Flask(__name__)
   
   @app.route('/')
   def hello():
       return "Hello Docker with Flask!"
   
   if __name__ == '__main__':
       app.run(host='0.0.0.0', port=5000)
   ```

2. ç¼–å†™ `Dockerfile`ï¼ˆé•œåƒæ„å»ºæ–‡ä»¶ï¼‰ï¼š
   ```dockerfile
   # ä½¿ç”¨ Python å®˜æ–¹é•œåƒ
   FROM python:3.9-slim
   
   # è®¾ç½®å·¥ä½œç›®å½•
   WORKDIR /app
   
   # å¤åˆ¶ä»£ç åˆ°å®¹å™¨
   COPY . .
   
   # å®‰è£…ä¾èµ–
   RUN pip install flask
   
   # æš´éœ²ç«¯å£
   EXPOSE 5000
   
   # å¯åŠ¨å‘½ä»¤
   CMD ["python", "app.py"]
   ```

3. æ„å»ºé•œåƒï¼š
   ```bash
   docker build -t my-flask-app .
   ```

4. è¿è¡Œå®¹å™¨ï¼š
   ```bash
   docker run -d -p 5000:5000 --name my-app my-flask-app
   ```

5. è®¿é—® `http://localhost:5000`ï¼Œçœ‹åˆ° Flask åº”ç”¨çš„è¾“å‡ºï¼

---

## **Docker æ ¸å¿ƒå‘½ä»¤é€ŸæŸ¥è¡¨**
| å‘½ä»¤                                 | è¯´æ˜         |
| ------------------------------------ | ------------ |
| `docker pull <é•œåƒå>`               | æ‹‰å–é•œåƒ     |
| `docker run [é€‰é¡¹] <é•œåƒ>`           | è¿è¡Œå®¹å™¨     |
| `docker ps`                          | æŸ¥çœ‹å®¹å™¨åˆ—è¡¨ |
| `docker stop <å®¹å™¨å>`               | åœæ­¢å®¹å™¨     |
| `docker start <å®¹å™¨å>`              | å¯åŠ¨å®¹å™¨     |
| `docker rm <å®¹å™¨å>`                 | åˆ é™¤å®¹å™¨     |
| `docker rmi <é•œåƒå>`                | åˆ é™¤é•œåƒ     |
| `docker exec -it <å®¹å™¨å> /bin/bash` | è¿›å…¥å®¹å™¨ç»ˆç«¯ |
| `docker logs <å®¹å™¨å>`               | æŸ¥çœ‹å®¹å™¨æ—¥å¿— |

---

## **å¸¸è§é—®é¢˜ä¸è§£å†³**
### é—®é¢˜ 1ï¼šç«¯å£å†²çª
- **é”™è¯¯**ï¼š`Bind for 0.0.0.0:80 failed: port is already allocated`  
- **è§£å†³**ï¼šæ›´æ¢ä¸»æœºç«¯å£ï¼ˆå¦‚ `-p 8080:80`ï¼‰æˆ–åœæ­¢å ç”¨ç«¯å£çš„å®¹å™¨ã€‚

### é—®é¢˜ 2ï¼šæƒé™ä¸è¶³
- **é”™è¯¯**ï¼š`Got permission denied while trying to connect to the Docker daemon`  
- **è§£å†³**ï¼ˆLinuxï¼‰ï¼š
  ```bash
  sudo usermod -aG docker $USER  # å°†å½“å‰ç”¨æˆ·åŠ å…¥ docker ç»„
  newgrp docker                 # åˆ·æ–°ç”¨æˆ·ç»„
  ```

### é—®é¢˜ 3ï¼šé•œåƒä¸‹è½½å¤±è´¥
- **é”™è¯¯**ï¼š`Error response from daemon: pull access denied`  
- **è§£å†³**ï¼šæ£€æŸ¥é•œåƒåç§°æ‹¼å†™ï¼Œæˆ–ç™»å½• Docker Hubï¼š
  ```bash
  docker login
  ```

---

## **æ·±å…¥å­¦ä¹ å»ºè®®**
1. **ç†è§£ Dockerfile**ï¼šå­¦ä¹ ç¼–å†™è‡ªå®šä¹‰é•œåƒçš„é…ç½®æ–‡ä»¶ã€‚  
2. **æ•°æ®æŒä¹…åŒ–**ï¼šæŒæ¡ `-v` æŒ‚è½½å·å’Œ `docker volume` çš„ä½¿ç”¨ã€‚  
3. **ç½‘ç»œé…ç½®**ï¼šå­¦ä¹ å®¹å™¨é—´é€šä¿¡ï¼ˆå¦‚ `docker network`ï¼‰ã€‚  
4. **Docker Compose**ï¼šç”¨ YAML æ–‡ä»¶ç®¡ç†å¤šå®¹å™¨åº”ç”¨ã€‚  

æ¨èèµ„æºï¼š
- å®˜æ–¹æ–‡æ¡£ï¼šhttps://docs.docker.com/  
- äº’åŠ¨æ•™ç¨‹ï¼šhttps://www.docker.com/101-tutorial/  
